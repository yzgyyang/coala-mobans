variables:
  PYTHON: python3
  DEBIAN_FRONTEND: noninteractive
  XDG_CACHE_HOME: "$CI_PROJECT_DIR/.cache/"

cache:
  paths:
    - $CI_PROJECT_PATH/.cache/pip


lint:
  image: python:3.5
  before_script:
    - $PYTHON -m pip install setuptools==21 pip==9
    - pip install 'git+https://github.com/coala/coala#egg=coala'
    - pip install 'git+https://github.com/coala/coala-bears#egg=coala-bears'
  script:
    - coala --ci

moban:
  image: python:3.5
  before_script:
    - pip install moban
    - git clone https://github.com/moremoban/pypi-mobans ../pypi-mobans
    - git clone https://github.com/ogrisel/python-appveyor-demo
        ../python-appveyor-demo
    - git clone --depth 1 https://github.com/github/gitignore ../gitignore
    - git clone https://github.com/coala/artwork ../artwork
  script:
    - moban
    - git diff --exit-code
